<app-header></app-header>

<div class="product-approval-container">
  <div class="page-header">
    <div class="header-content">
      <h1>Product Approval</h1>
      <p>Review and approve pending products</p>
    </div>
    <button class="btn-secondary" (click)="loadPendingProducts()" [disabled]="isLoading">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <polyline points="23 4 23 10 17 10"></polyline>
        <polyline points="1 20 1 14 7 14"></polyline>
        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
      </svg>
      Refresh
    </button>
  </div>

  <div class="messages-container">
    <div class="error-message" *ngIf="errorMessage">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <circle cx="12" cy="12" r="10"></circle>
        <line x1="12" y1="8" x2="12" y2="12"></line>
        <line x1="12" y1="16" x2="12.01" y2="16"></line>
      </svg>
      {{ errorMessage }}
    </div>

    <div class="success-message" *ngIf="successMessage">
      <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
      {{ successMessage }}
    </div>
  </div>

  <div class="products-container">
    <div class="loading-overlay" *ngIf="isLoading">
      <div class="spinner"></div>
      <p>Loading pending products...</p>
    </div>

    <div class="products-grid" *ngIf="!isLoading">
      <div class="product-card" *ngFor="let product of pendingProducts">
        <div class="product-image">
          <img [src]="product.imageUrl || 'https://via.placeholder.com/300x200?text=No+Image'" 
               [alt]="product.name"
               (error)="handleImageError($event)">
          <span class="status-badge pending">Pending Approval</span>
        </div>
        
        <div class="product-info">
          <h3 class="product-name">{{ product.name }}</h3>
          <p class="product-description">{{ product.description }}</p>
          
          <div class="product-details">
            <div class="detail-item">
              <span class="label">Category:</span>
              <span class="value">{{ product.categoryName }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Price:</span>
              <span class="value price">{{ formatPrice(product.price) }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Stock:</span>
              <span class="value">{{ product.stockQuantity }} units</span>
            </div>
            <div class="detail-item">
              <span class="label">Created by:</span>
              <span class="value">{{ product.createdByEmail }}</span>
            </div>
            <div class="detail-item">
              <span class="label">Created at:</span>
              <span class="value">{{ formatDate(product.createdAt) }}</span>
            </div>
          </div>

          <div class="product-actions">
            <button class="btn-approve" (click)="approveProduct(product.id, product.name)" [disabled]="isLoading">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <polyline points="20 6 9 17 4 12"></polyline>
              </svg>
              Approve
            </button>
            <button class="btn-reject" (click)="rejectProduct(product.id, product.name)" [disabled]="isLoading">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="15" y1="9" x2="9" y2="15"></line>
                <line x1="9" y1="9" x2="15" y2="15"></line>
              </svg>
              Reject
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="empty-state" *ngIf="!isLoading && pendingProducts.length === 0">
      <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <polyline points="20 6 9 17 4 12"></polyline>
      </svg>
      <h3>No Pending Products</h3>
      <p>All products have been reviewed. There are no pending approvals at the moment.</p>
    </div>
  </div>
</div>

